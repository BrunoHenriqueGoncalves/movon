<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>MoveOn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #ff6a00;
      --secondary: #0044ff;
      --bg: #f5f5f5;
      --text: #111111;
      --card: #ffffff;
      --border: #e0e0e0;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", sans-serif;
    }

    body {
      margin: 0;
      background: var(--bg);
    }

    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
    }

    .screen {
      display: none;
      padding: 16px;
      padding-bottom: 80px;
    }

    .screen.active {
      display: block;
    }

    h1, h2, h3 {
      margin: 0 0 8px;
    }

    p {
      margin: 0 0 8px;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 14px 16px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      text-align: center;
      margin-top: 12px;
    }

    .btn-primary {
      background: var(--primary);
      color: #ffffff;
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-ghost {
      background: transparent;
      border: none;
      color: var(--secondary);
      font-size: 14px;
      text-align: center;
      margin-top: 8px;
      cursor: pointer;
    }

    .card {
      background: var(--card);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.06);
      border: 1px solid var(--border);
    }

    .input-group {
      margin-bottom: 12px;
    }

    .input-group label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
    }

    .input-group input,
    .input-group select,
    .input-group textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #cccccc;
      font-size: 14px;
    }

    .input-group textarea {
      resize: vertical;
      min-height: 60px;
    }

    .chip-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
      margin-bottom: 8px;
    }

    .chip {
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 13px;
      border: 1px solid #cccccc;
      background: #e0e0e0;
      cursor: pointer;
      user-select: none;
    }

    .chip.selected {
      background: var(--primary);
      color: #ffffff;
      border-color: var(--primary);
    }

    .xp-bar-container {
      margin-top: 8px;
      margin-bottom: 4px;
      width: 100%;
    }

    .xp-bar-bg {
      width: 100%;
      height: 12px;
      border-radius: 6px;
      background: #cccccc;
      overflow: hidden;
    }

    .xp-bar-fill {
      height: 100%;
      width: 40%;
      background: var(--primary);
      border-radius: 6px;
      transition: width 0.3s;
    }

    .shortcut-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }

    .shortcut-card {
      background: var(--card);
      border-radius: 16px;
      padding: 12px;
      border: 1px solid var(--border);
      text-align: left;
      font-size: 14px;
      cursor: pointer;
    }

    .shortcut-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .shortcut-sub {
      font-size: 12px;
      color: #666666;
    }

    .activity-list {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .activity-card-header {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      margin-bottom: 4px;
    }

    .activity-meta {
      font-size: 12px;
      color: #666666;
    }

    .xp-highlight {
      color: var(--primary);
      font-weight: 700;
    }

    .tag {
      display: inline-block;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 8px;
      background: #eee;
      margin-left: 4px;
    }

    .badges-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 12px;
    }

    .badge {
      text-align: center;
      font-size: 11px;
    }

    .badge-circle {
      width: 72px;
      height: 72px;
      margin: 0 auto 4px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #eeeeee;
      color: #888888;
      font-size: 11px;
    }

    .badge.unlocked .badge-circle {
      background: var(--primary);
      color: #ffffff;
    }

    .badge-title {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .badge-desc {
      color: #666666;
    }

    .ranking-list {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .ranking-item {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--card);
      border-radius: 12px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      font-size: 13px;
    }

    .ranking-pos {
      font-weight: 700;
      width: 24px;
    }

    .ranking-name {
      flex: 1;
    }

    .ranking-xp {
      font-weight: 600;
      color: #555555;
    }

    .ranking-me {
      border-color: var(--primary);
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .top-bar-title {
      font-size: 20px;
      font-weight: 700;
    }

    .top-bar-link {
      font-size: 13px;
      color: var(--secondary);
      cursor: pointer;
    }

    .small {
      font-size: 12px;
      color: #666666;
    }
  </style>
</head>
<body>
  <div class="app">

    <!-- Onboarding 1 -->
    <section id="screen-onb1" class="screen active">
      <h1>MoveOn</h1>
      <h2>Transforme seus treinos em progresso visível</h2>
      <p>Registre o que você já faz de atividade física e veja tudo virar XP, níveis e conquistas.</p>
      <div class="card" style="margin-top:24px; text-align:center;">
        <p>Ilustração exemplo</p>
        <p class="small">Aqui poderia entrar uma imagem de pessoas se exercitando.</p>
      </div>
      <button class="btn btn-primary" onclick="goTo('screen-onb2')">Continuar</button>
    </section>

    <!-- Onboarding 2 -->
    <section id="screen-onb2" class="screen">
      <h2>Como o MoveOn funciona</h2>
      <p>Você registra cada atividade com tipo, tempo e intensidade.</p>
      <p>O aplicativo converte isso em XP usando uma fórmula simples.</p>
      <p>Você sobe de nível, desbloqueia medalhas e entra no ranking.</p>
      <p class="small">Sem metas obrigatórias. Só reconhecimento do seu esforço.</p>

      <button class="btn btn-primary" onclick="goTo('screen-signup')">Criar conta</button>
      <button class="btn btn-secondary" onclick="goTo('screen-login')">Já tenho conta</button>
    </section>

    <!-- Login -->
    <section id="screen-login" class="screen">
      <h2>Entrar</h2>
      <form onsubmit="handleLogin(event)">
        <div class="input-group">
          <label for="login-email">Email</label>
          <input id="login-email" type="email" required placeholder="seuemail@exemplo.com" />
        </div>
        <div class="input-group">
          <label for="login-senha">Senha</label>
          <input id="login-senha" type="password" required placeholder="Sua senha" />
        </div>
        <button class="btn btn-primary" type="submit">Entrar</button>
      </form>
      <button class="btn-ghost" onclick="goTo('screen-signup')">Criar conta</button>
    </section>

    <!-- Cadastro -->
    <section id="screen-signup" class="screen">
      <h2>Criar conta</h2>
      <form onsubmit="handleSignup(event)">
        <div class="input-group">
          <label for="signup-nome">Nome</label>
          <input id="signup-nome" type="text" required placeholder="Como você quer ser chamado" />
        </div>
        <div class="input-group">
          <label for="signup-email">Email</label>
          <input id="signup-email" type="email" required placeholder="seuemail@exemplo.com" />
        </div>
        <div class="input-group">
          <label for="signup-senha">Senha</label>
          <input id="signup-senha" type="password" required placeholder="Crie uma senha" />
        </div>
        <button class="btn btn-primary" type="submit">Criar conta</button>
      </form>
      <button class="btn-ghost" onclick="goTo('screen-login')">Já tenho conta</button>
    </section>

    <!-- Home -->
    <section id="screen-home" class="screen">
      <div class="top-bar">
        <div>
          <div class="small">Bem vindo</div>
          <div class="top-bar-title" id="home-username">Atleta</div>
        </div>
        <div class="top-bar-link" onclick="goTo('screen-profile')">Perfil</div>
      </div>

      <div class="card">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div>
            <div class="small">Seu nível</div>
            <h2 id="home-level">Nível 1</h2>
          </div>
          <div style="text-align:right;">
            <div class="small">XP total</div>
            <div id="home-xp-total" class="xp-highlight">0 XP</div>
          </div>
        </div>
        <div class="xp-bar-container">
          <div class="xp-bar-bg">
            <div id="home-xp-bar" class="xp-bar-fill" style="width:0%;"></div>
          </div>
        </div>
        <div class="small" id="home-xp-next">0 de 500 XP para o próximo nível</div>
      </div>

      <button class="btn btn-primary" style="margin-top:16px;" onclick="goTo('screen-add-activity')">
        Registrar atividade
      </button>

      <h3 style="margin-top:24px; margin-bottom:4px;">Atalhos</h3>
      <div class="shortcut-grid">
        <div class="shortcut-card" onclick="goTo('screen-history')">
          <div class="shortcut-title">Histórico</div>
          <div class="shortcut-sub">Veja tudo o que já registrou</div>
        </div>
        <div class="shortcut-card" onclick="goTo('screen-medals')">
          <div class="shortcut-title">Medalhas</div>
          <div class="shortcut-sub">Suas conquistas</div>
        </div>
        <div class="shortcut-card" onclick="goTo('screen-ranking')">
          <div class="shortcut-title">Ranking</div>
          <div class="shortcut-sub">Compare seu XP</div>
        </div>
        <div class="shortcut-card" onclick="goTo('screen-map')">
          <div class="shortcut-title">Mapa</div>
          <div class="shortcut-sub">Rotas e eventos</div>
        </div>
      </div>

      <h3 style="margin-top:24px; margin-bottom:4px;">Últimas atividades</h3>
      <div id="home-activity-list" class="activity-list small">
        <p class="small">Nenhuma atividade registrada ainda.</p>
      </div>
    </section>

    <!-- Registrar atividade -->
    <section id="screen-add-activity" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Registrar atividade</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Fechar</div>
      </div>
      <p class="small">Preencha os campos e veja quanto XP você ganha.</p>

      <form onsubmit="handleAddActivity(event)">
        <div class="input-group">
          <label for="act-type">Tipo de atividade</label>
          <select id="act-type" required>
            <option value="">Selecione</option>
            <option value="cardio">Cardio</option>
            <option value="musculacao">Musculação</option>
            <option value="funcional">Funcional</option>
            <option value="outro">Outro</option>
          </select>
        </div>

        <div class="input-group">
          <label for="act-time">Tempo total (minutos)</label>
          <input id="act-time" type="number" min="1" required placeholder="Exemplo: 40" />
        </div>

        <div class="input-group">
          <label>Intensidade</label>
          <div class="chip-row">
            <div class="chip" data-intensity="leve" onclick="selectIntensity(this)">Leve</div>
            <div class="chip" data-intensity="moderada" onclick="selectIntensity(this)">Moderada</div>
            <div class="chip" data-intensity="alta" onclick="selectIntensity(this)">Alta</div>
          </div>
          <input type="hidden" id="act-intensity" required />
        </div>

        <div class="input-group">
          <label for="act-notes">Notas (opcional)</label>
          <textarea id="act-notes" placeholder="Exemplo: treino de pernas, fiz agachamento pesado."></textarea>
        </div>

        <button class="btn btn-primary" type="submit">Salvar atividade</button>
      </form>
    </section>

    <!-- Resumo atividade -->
    <section id="screen-summary" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Atividade registrada</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Home</div>
      </div>

      <div class="card">
        <h3 id="sum-title">Atividade</h3>
        <p class="small" id="sum-meta"></p>
        <hr style="border:none; border-top:1px solid #eeeeee; margin:12px 0;" />
        <p class="small">Fórmula de XP usada:</p>
        <p class="small">XP = tempo × fatorTipo × fatorIntensidade</p>
        <p class="small" id="sum-formula"></p>
        <p style="margin-top:12px;">
          <span class="xp-highlight" id="sum-xp"></span>
        </p>
        <p class="small" id="sum-msg"></p>
      </div>

      <button class="btn btn-primary" style="margin-top:16px;" onclick="goTo('screen-home')">
        Voltar para a Home
      </button>
    </section>

    <!-- Histórico -->
    <section id="screen-history" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Histórico</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Home</div>
      </div>
      <p class="small">Veja as atividades já registradas.</p>

      <div id="history-list" class="activity-list small" style="margin-top:12px;">
        <p class="small">Nenhuma atividade registrada ainda.</p>
      </div>
    </section>

    <!-- Medalhas -->
    <section id="screen-medals" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Medalhas</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Home</div>
      </div>
      <p class="small">Conquistas que reconhecem seu esforço.</p>

      <div id="medals-grid" class="badges-grid">
        <!-- preenchido via JS -->
      </div>
    </section>

    <!-- Ranking -->
    <section id="screen-ranking" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Ranking</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Home</div>
      </div>
      <p class="small">Veja como seu XP se compara com outros usuários.</p>

      <div id="ranking-list" class="ranking-list">
        <!-- preenchido via JS -->
      </div>
    </section>

    <!-- Mapa / Eventos -->
    <section id="screen-map" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Mapa e eventos</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Home</div>
      </div>
      <div class="card">
        <h3>Em breve</h3>
        <p class="small">
          Aqui você verá um mapa com rotas de treino e eventos próximos recomendados para você.
        </p>
        <p class="small">
          Esta funcionalidade faz parte da fase 2 do MoveOn e ainda não está ativa neste MVP.
        </p>
      </div>
    </section>

    <!-- Perfil -->
    <section id="screen-profile" class="screen">
      <div class="top-bar">
        <div class="top-bar-title">Perfil</div>
        <div class="top-bar-link" onclick="goTo('screen-home')">Home</div>
      </div>
      <div class="card">
        <p><strong>Nome</strong></p>
        <p id="profile-name">Usuário</p>
        <p><strong>Email</strong></p>
        <p id="profile-email">email@exemplo.com</p>
        <p><strong>XP total</strong></p>
        <p id="profile-xp">0 XP</p>
      </div>
      <button class="btn btn-secondary" style="margin-top:16px;" onclick="resetApp()">
        Sair e limpar dados
      </button>
    </section>

  </div>

  <script>
    // Estado simples do aplicativo
    const state = {
      userName: "Atleta",
      userEmail: "",
      xpTotal: 0,
      level: 1,
      activities: [],
      lastActivity: null
    };

    // Faixas de nível: cada elemento é XP necessário acumulado
    const levelThresholds = [
      0,    // nível 1
      500,  // nível 2
      1500, // nível 3
      3000, // nível 4
      5000  // nível 5
    ];

    function goTo(id) {
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      const screen = document.getElementById(id);
      if (screen) {
        screen.classList.add("active");
      }
      // Atualizações quando entra em algumas telas
      if (id === "screen-home") {
        renderHome();
      } else if (id === "screen-history") {
        renderHistory();
      } else if (id === "screen-medals") {
        renderMedals();
      } else if (id === "screen-ranking") {
        renderRanking();
      } else if (id === "screen-profile") {
        renderProfile();
      }
    }

    function handleSignup(event) {
      event.preventDefault();
      const nome = document.getElementById("signup-nome").value.trim();
      const email = document.getElementById("signup-email").value.trim();
      state.userName = nome || "Atleta";
      state.userEmail = email;
      state.xpTotal = 0;
      state.level = 1;
      state.activities = [];
      state.lastActivity = null;
      goTo("screen-home");
    }

    function handleLogin(event) {
      event.preventDefault();
      const email = document.getElementById("login-email").value.trim();
      state.userName = "Atleta";
      state.userEmail = email || "";
      goTo("screen-home");
    }

    function selectIntensity(chipElement) {
      document.querySelectorAll("#screen-add-activity .chip").forEach(c => {
        c.classList.remove("selected");
      });
      chipElement.classList.add("selected");
      const intensity = chipElement.getAttribute("data-intensity");
      document.getElementById("act-intensity").value = intensity;
    }

    function handleAddActivity(event) {
      event.preventDefault();
      const type = document.getElementById("act-type").value;
      const time = Number(document.getElementById("act-time").value);
      const intensity = document.getElementById("act-intensity").value;
      const notes = document.getElementById("act-notes").value.trim();

      if (!type || !time || !intensity) {
        alert("Preencha tipo, tempo e intensidade.");
        return;
      }

      const xpCalc = calculateXP(type, time, intensity);
      const activity = {
        id: Date.now(),
        type,
        time,
        intensity,
        notes,
        date: new Date(),
        xp: xpCalc.xp,
        factors: xpCalc
      };

      state.activities.unshift(activity);
      state.lastActivity = activity;
      state.xpTotal += xpCalc.xp;
      updateLevel();

      document.getElementById("act-type").value = "";
      document.getElementById("act-time").value = "";
      document.getElementById("act-intensity").value = "";
      document.getElementById("act-notes").value = "";
      document.querySelectorAll("#screen-add-activity .chip").forEach(c => c.classList.remove("selected"));

      renderSummary();
      goTo("screen-summary");
    }

    function calculateXP(type, time, intensity) {
      let fatorTipo = 1.0;
      if (type === "cardio") fatorTipo = 1.2;
      if (type === "musculacao") fatorTipo = 1.5;
      if (type === "funcional") fatorTipo = 1.3;

      let fatorIntensidade = 1.0;
      if (intensity === "moderada") fatorIntensidade = 1.5;
      if (intensity === "alta") fatorIntensidade = 2.0;

      const xp = Math.round(time * fatorTipo * fatorIntensidade);

      return {
        xp,
        fatorTipo,
        fatorIntensidade,
        time
      };
    }

    function updateLevel() {
      const xp = state.xpTotal;
      let lvl = 1;
      for (let i = levelThresholds.length - 1; i >= 0; i--) {
        if (xp >= levelThresholds[i]) {
          lvl = i + 1;
          break;
        }
      }
      state.level = lvl;
    }

    function renderHome() {
      document.getElementById("home-username").textContent = state.userName || "Atleta";
      document.getElementById("home-xp-total").textContent = state.xpTotal + " XP";
      document.getElementById("home-level").textContent = "Nível " + state.level;

      const currentLevelIndex = state.level - 1;
      const currentThreshold = levelThresholds[currentLevelIndex] || 0;
      const nextThreshold = levelThresholds[currentLevelIndex + 1] || (currentThreshold + 2000);
      const xpInLevel = state.xpTotal - currentThreshold;
      const xpRange = nextThreshold - currentThreshold;
      const percent = Math.max(0, Math.min(100, (xpInLevel / xpRange) * 100));

      const bar = document.getElementById("home-xp-bar");
      bar.style.width = percent + "%";
      document.getElementById("home-xp-next").textContent =
        xpInLevel + " de " + xpRange + " XP para o próximo nível";

      const list = document.getElementById("home-activity-list");
      list.innerHTML = "";
      if (state.activities.length === 0) {
        const p = document.createElement("p");
        p.className = "small";
        p.textContent = "Nenhuma atividade registrada ainda.";
        list.appendChild(p);
      } else {
        state.activities.slice(0, 3).forEach(act => {
          const card = document.createElement("div");
          card.className = "card";
          const header = document.createElement("div");
          header.className = "activity-card-header";
          header.innerHTML =
            "<span>" + formatActivityType(act.type) + "</span>" +
            "<span class='xp-highlight'>+" + act.xp + " XP</span>";
          const meta = document.createElement("div");
          meta.className = "activity-meta";
          meta.textContent = formatDate(act.date) + " · " + act.time + " min · Intensidade " + act.intensity;
          card.appendChild(header);
          card.appendChild(meta);
          list.appendChild(card);
        });
      }
    }

    function renderSummary() {
      const act = state.lastActivity;
      if (!act) return;
      document.getElementById("sum-title").textContent = formatActivityType(act.type);
      document.getElementById("sum-meta").textContent =
        act.time + " min · Intensidade " + act.intensity + (act.notes ? " · " + act.notes : "");
      const f = act.factors;
      document.getElementById("sum-formula").textContent =
        "XP = " + f.time + " × " + f.fatorTipo.toFixed(1) + " × " + f.fatorIntensidade.toFixed(1);
      document.getElementById("sum-xp").textContent = "Você ganhou +" + act.xp + " XP";
      document.getElementById("sum-msg").textContent =
        "Parabéns, seu esforço foi registrado. Continue acumulando XP para subir de nível e desbloquear medalhas.";
    }

    function renderHistory() {
      const container = document.getElementById("history-list");
      container.innerHTML = "";
      if (state.activities.length === 0) {
        const p = document.createElement("p");
        p.className = "small";
        p.textContent = "Nenhuma atividade registrada ainda.";
        container.appendChild(p);
        return;
      }
      state.activities.forEach(act => {
        const card = document.createElement("div");
        card.className = "card";
        const header = document.createElement("div");
        header.className = "activity-card-header";
        header.innerHTML =
          "<span>" + formatActivityType(act.type) + "</span>" +
          "<span class='xp-highlight'>+" + act.xp + " XP</span>";
        const meta = document.createElement("div");
        meta.className = "activity-meta";
        meta.textContent =
          formatDate(act.date) + " · " + act.time + " min · Intensidade " + act.intensity;
        const notes = document.createElement("div");
        notes.className = "small";
        notes.textContent = act.notes || "";
        card.appendChild(header);
        card.appendChild(meta);
        if (act.notes) card.appendChild(notes);
        container.appendChild(card);
      });
    }

    function getMedalsState() {
      const acts = state.activities;
      const medals = {
        primeira: false,
        seteDias: false,
        minutos300: false,
        xp1000: false,
        multi: false,
        alta5: false
      };

      if (acts.length > 0) medals.primeira = true;

      const totalMinutos = acts.reduce((acc, a) => acc + a.time, 0);
      if (totalMinutos >= 300) medals.minutos300 = true;

      if (state.xpTotal >= 1000) medals.xp1000 = true;

      const tiposUsados = new Set(acts.map(a => a.type));
      if (tiposUsados.size >= 3) medals.multi = true;

      const altaCount = acts.filter(a => a.intensity === "alta").length;
      if (altaCount >= 5) medals.alta5 = true;

      const diasComAtividade = new Set(
        acts.map(a => a.date.toDateString())
      );
      if (diasComAtividade.size >= 7) medals.seteDias = true;

      return medals;
    }

    function renderMedals() {
      const medals = getMedalsState();
      const container = document.getElementById("medals-grid");
      container.innerHTML = "";

      const lista = [
        {
          id: "primeira",
          titulo: "Primeira atividade",
          desc: "Você registrou a primeira atividade."
        },
        {
          id: "seteDias",
          titulo: "7 dias seguidos",
          desc: "Atividades em 7 dias diferentes."
        },
        {
          id: "minutos300",
          titulo: "Hora extra",
          desc: "Acumulou 300 minutos de treino."
        },
        {
          id: "xp1000",
          titulo: "Mil XP",
          desc: "Alcançou 1000 XP."
        },
        {
          id: "multi",
          titulo: "Multiatividade",
          desc: "Registrou vários tipos de atividade."
        },
        {
          id: "alta5",
          titulo: "Alta intensidade",
          desc: "5 atividades de alta intensidade."
        }
      ];

      lista.forEach(def => {
        const unlocked = medals[def.id];
        const badge = document.createElement("div");
        badge.className = "badge" + (unlocked ? " unlocked" : "");

        const circle = document.createElement("div");
        circle.className = "badge-circle";
        circle.textContent = unlocked ? "OK" : "?";

        const title = document.createElement("div");
        title.className = "badge-title";
        title.textContent = def.titulo;

        const desc = document.createElement("div");
        desc.className = "badge-desc";
        desc.textContent = def.desc;

        badge.appendChild(circle);
        badge.appendChild(title);
        badge.appendChild(desc);
        container.appendChild(badge);
      });
    }

    function renderRanking() {
      const basePlayers = [
        { name: "Ana", xp: 3200 },
        { name: "Bruno", xp: 2700 },
        { name: "Carla", xp: 2200 },
        { name: "Diego", xp: 1800 },
        { name: "Eduarda", xp: 1500 }
      ];

      const me = {
        name: state.userName || "Você",
        xp: state.xpTotal
      };

      const players = [...basePlayers, me];
      players.sort((a, b) => b.xp - a.xp);

      const container = document.getElementById("ranking-list");
      container.innerHTML = "";

      players.forEach((p, index) => {
        const item = document.createElement("div");
        item.className = "ranking-item";
        if (p === me) {
          item.classList.add("ranking-me");
        }
        const pos = document.createElement("div");
        pos.className = "ranking-pos";
        pos.textContent = "#" + (index + 1);
        const name = document.createElement("div");
        name.className = "ranking-name";
        name.textContent = p.name;
        const xp = document.createElement("div");
        xp.className = "ranking-xp";
        xp.textContent = p.xp + " XP";

        item.appendChild(pos);
        item.appendChild(name);
        item.appendChild(xp);
        container.appendChild(item);
      });
    }

    function renderProfile() {
      document.getElementById("profile-name").textContent = state.userName || "Usuário";
      document.getElementById("profile-email").textContent =
        state.userEmail || "email não informado";
      document.getElementById("profile-xp").textContent = state.xpTotal + " XP";
    }

    function resetApp() {
      if (!confirm("Tem certeza que deseja sair e limpar os dados deste MVP?")) return;
      state.userName = "Atleta";
      state.userEmail = "";
      state.xpTotal = 0;
      state.level = 1;
      state.activities = [];
      state.lastActivity = null;
      goTo("screen-onb1");
    }

    function formatActivityType(type) {
      if (type === "cardio") return "Cardio";
      if (type === "musculacao") return "Musculação";
      if (type === "funcional") return "Funcional";
      if (type === "outro") return "Outro";
      return type;
    }

    function formatDate(date) {
      const d = new Date(date);
      const dia = String(d.getDate()).padStart(2, "0");
      const mes = String(d.getMonth() + 1).padStart(2, "0");
      return dia + "/" + mes;
    }

    renderHome();
  </script>
</body>
</html>
